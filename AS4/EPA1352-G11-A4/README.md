# Simple Transport Model Demo in MESA

Created by: EPA1352 Group 11* 

|      Name      | Student Number |
|:--------------:|:---------------|
| Rick van Arkel | 4974859        | 
|  Laura Drost   | 5066034        |
|   Inge Faber   | 4457617        |
| Daan de Jager  | 4702972        |
| Susan Ruinaard | 4650441        |

Date: 24-03-2023

## Introduction

This model is build to analyze the infrastructure in Bangladesh. The aim of the model itself is to simulate trucks traveling along the infrastructure network of Bangladesh. Subsequently, the navigability of these roads can be tested. This model focuses on the N1 en N2 roads. In the simulation a truck starts driving the N1 every 5 minutes with an average speed of 48 km/h. When it crosses a bridge the truck can be delayed with a certain possiblity and time that is varied by the scenarios, the bridge length and the bridge conditions. Every run simulates 5 times 24 hours. After each run an csv file is given as output containing the average time in minutes it took trucks to drive the N1. Each truck is assigned a random sink target node. Based on dijkstras algorith the shortest path is calculated. 
 


## How to Use

* Launch the simulation model 
```
    $ python G11_A2_run.py
```

For further use of the models, please refer to the function descriptions on how to change scenarios and input files. 

## Files
* [model_run.py](.../model_run.py): Contains a model to read the orginial data and execute `preparing_data.py` and `model_run.py`
* [preparing_data.py](.../preparing_data.py): Contains the model to prepare the data, thus merges the files _road.csv and BMMS_overview.xlxs. The models output is a file containing the components needed for the `components.py`
* [model.py](../model.py): Contains the model `BangladeshModel` which is a subclass of Mesa `Model`. It reads a `csv` file with specific format for (transport) model generation. (See the README in the `data` directory for data format.) In addition to dynamic behavior, each model component instance (i.e., object) also has geo-location variables, i.e. latitude and longitude in Decimal Degrees (DD). The given bounds of the latitude and longitude of all objects are translated into the bounds of the HTML5 canvas, which is used in case the visualization is launched. 

    In this file, you modify the model generation and add your own routines.

* [components.py](../components.py): Contains the model component definitions for the (main) model. Check the file carefully to see which components are already defined. 
  
    In this file, you modify and add your own components.

* [model_viz.py](../model_viz.py): Sets up the visualization; uses the `SimpleCanvas` element defined. Calls the model. Run the visualization server.

    In this file, you define simple visualization.

* [model_run.py](../model_run.py): Sets up the model run (conditions). Calls the model. Run the simulation without visualization. 

    In this file, you define model batch runs.

* [Route_Network.py](../Route_Network.py): Contains all the networkX related functions.

    In this file, the netowrkX model is created.
  
* [ContinuousSpace](ContinuousSpace): The directory contains files needed to visualize Python3 Mesa models on a continuous canvas with geo-coordinates, a functionality not contained in the current Mesa package. 
  
    Editing files in this directory is NOT recommended for our assignment. 
 
* [ContinuousSpace/SimpleContinuousModule.py](ContinuousSpace/SimpleContinuousModule.py): Defines ``SimpleCanvas``, the Python side of a custom visualization module for drawing objects with continuous positions. This is a slight adaptation of the Flocker example provided by the Mesa project. 
  
    Editing this file is NOT recommended for our assignment. 
  
* [ContinuousSpace/simple_continuous_canvas.js](ContinuousSpace/simple_continuous_canvas.js): JavaScript side of the ``SimpleCanvas`` visualization module. It takes the output generated by the Python ``SimpleCanvas`` element and draws it in the browser window via HTML5 canvas. It can draw circles and rectangles. Both can have text annotation. This file is an adaptation of the Flocker example provided by the Mesa project. 
  
    Editing this file is NOT recommended for our assignment. 
 

(*The basis are constructed by the course author)
