import warnings
warnings.filterwarnings('ignore')
import networkx as nx
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

'''
Er kunnen zowel analyses gedaan worden op de NetworkX als op de dataframe
Voor nu zit er alleen een basisbestand in voor de analyse per road, en per road segment
'''

analysis_link = './data/traffic_network_compact_LB.csv'
analysis_df = pd.read_csv(analysis_link)

vulnerability_columns = ['road segment', 'bridge_length', 'condition_A', 'condition_B', 'condition_C', 'condition_D'] # Nu per road segment gekeken, kan op dezelfde manier met road

vulnerability_df = analysis_df.loc[:, vulnerability_columns]

print(vulnerability_df.head())

vulnerability_df_grouped = vulnerability_df.groupby('road segment').sum()
vulnerability_df_grouped = vulnerability_df_grouped.reset_index()

print(vulnerability_df_grouped.head())

vulnerability_df_sum = vulnerability_df_grouped
vulnerability_df_sum['vulnerability'] = vulnerability_df_sum['condition_A'] + 2*vulnerability_df_sum['condition_B'] \
                                        + 4*vulnerability_df_sum['condition_C'] + 8*vulnerability_df_sum['condition_D']

print(vulnerability_df_sum.sort_values('vulnerability', ascending=False))

'''
Het expanden van de condition naar condition_A e.d. kan ook eerder gedaan worden, waardoor het nog meekan als weight in networkx?

Als een metric bijv. bridge length/total road part length is, neem dan ook 'length' mee! Kan door traffic_network_LB te 
gebruiken ipv compact 

Hoe naar 1 metric voor bridge condition, nog een kolom toevoegen met een exp waarde of een andere verdeling? 
1*A + 2*B + 4*C + 16*D? Of 1*A + 2*B + 4*C + 8*D? oid?

Wat plaatjes en sorteer dingen doen! 

En nog wat met networkX?
'''